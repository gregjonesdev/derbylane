{% extends '_base.html' %}

{% block content %}

    <form action="{% url 'results' %}" method="post">
      {% csrf_token %}
      <div class="card-header" style="margin-bottom: 15px">
        <span style="font-size: 1.5em">{{ day }}</span>
        <!-- <label for="your_name">Select Date: </label> -->
        <span class="float-right" style="height: 25px; padding-top:3px">
          <input id="target_date" type="date" name="date" data-value="{{ date }}">
          <input type="submit" class="btn-outline-primary" value="OK">
        </span>

      </div>

      {% if bets|length > 0 %}
        <table class="table table-sm">
          <thead>
          <tr>
          <th>Chart</th>
          <th>Race</th>
          <th>Participant</th>
          <th>Bet</th>
          <th>$2 Win</th>
          </tr>
          </thead>
          <tbody>
            {% for bet in bets %}
              {% with race=bet.participant.race %}
                <tr>
                  <td>
                    {{ race.chart.program.venue.kiosk_name }}
                    {{ race.chart.kiosk_time }}
                  </td>
                  <td>
                    {{ race.number }}
                  </td>
                  <td> {{ bet.participant.post }} - {{ bet.participant.dog.name }}</td>
                  <td>{{ bet.type.name }}</td>
                  <td>{% if bet.get_return %}
                    <button style="height:20px; font-weight: bold; padding: 0 8px" class="btn btn-sm btn-success" disabled>$ {{bet.get_return }}</button>
                      {% endif %}
                  </td>
                </tr>
              {% endwith %}
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <div style="text-align:center; margin: 50px auto">
          No bets placed
        </div>
        {% endif %}
    </form>


<script>
  const input = document.getElementById("target_date")
  input.value = input.getAttribute("data-value")
</script>

{% endblock content %}
